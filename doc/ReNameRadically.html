<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ReNameRadically - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/navigation.js" defer></script>
<script src="./js/search.js" defer></script>
<script src="./js/search_index.js" defer></script>
<script src="./js/searcher.js" defer></script>
<script src="./js/darkfish.js" defer></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
<div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  <p class="link">Object
</div>

    
    
    
<!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    <li ><a href="#method-c-new">::new</a>
    <li ><a href="#method-i-check_files">#check_files</a>
    <li ><a href="#method-i-create_renaming_script">#create_renaming_script</a>
    <li ><a href="#method-i-modality_compact">#modality_compact</a>
    <li ><a href="#method-i-modality_regex">#modality_regex</a>
    <li ><a href="#method-i-modality_widen">#modality_widen</a>
    <li ><a href="#method-i-rename">#rename</a>
    <li ><a href="#method-i-tester">#tester</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ReNameRadically">
  <h1 id="class-ReNameRadically" class="class">
    class ReNameRadically
  </h1>

  <section class="description">
    
<p>This is the <a href="ReNameRadically.html"><code>ReNameRadically</code></a> class.</p>

<p>Itâ€™s supposed to help renaming files in different ways:</p>
<dl class="rdoc-list note-list"><dt>compact
<dd>
<p>renames a file to a CamelCase format, removing spaces and using capital letters to separate words. Other capital letters areconverted to lower case.</p>
</dd><dt>widen
<dd>
<p>renames a file adding spaces to separate words in CamelCase format, and, depending on the case, before or after punctation.</p>
</dd><dt>regex
<dd>
<p>replaces all occurrences of the given regex with the given  substitute string.</p>
</dd><dt>renaming script
<dd>
<p>creates a bash script to rename files, for whenever the other modalities cannot yield the desired result.</p>
</dd></dl>

  </section>

  <section id="5Buntitled-5D" class="documentation-section">



    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      <div id="attribute-i-as_spaces" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">as_spaces</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        <p>Array of characters to be treated as spaces</p>
        </div>
      </div>
      <div id="attribute-i-delimiters" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">delimiters</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        <p>Array of characters to used as word delimiters</p>
        </div>
      </div>
      <div id="attribute-i-dry_run" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">dry_run</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        <p>Dry run flag.</p>
        </div>
      </div>
      <div id="attribute-i-ex_after" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">ex_after</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        <p>Array of exceptions not to put a space after in widen mode.</p>
        </div>
      </div>
      <div id="attribute-i-ex_before" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">ex_before</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        <p>Array of exceptions not to put a space before in widen mode.</p>
        </div>
      </div>
      <div id="attribute-i-script" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">script</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        <p>Script name for script renaming mode.</p>
        </div>
      </div>
    </section>


     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

      <div id="method-c-new" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">( dry_run: false, as_spaces: %w[ _ ], delimiters: %w[ - + ( ) [ ] { } &#39; &amp; . ! ? ], ex_after: %w[ &#39; ( - &lt; \[ { . ], ex_before: %w[ . , ? ! &#39; ) \] } &gt; - _ ], script: &#39;REN.sh&#39; )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Constructor. Takes as parameters the config file path and the dry run flag. Creates the config file if needed.</p>

          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/rename_radically.rb, line 52</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>( <span class="ruby-value">dry_run:</span> <span class="ruby-keyword">false</span>,
                <span class="ruby-value">as_spaces:</span> <span class="ruby-node">%w[ _ ]</span>,
                <span class="ruby-value">delimiters:</span> <span class="ruby-node">%w[ - + ( ) [ ] { } &#39; &amp; . ! ? ]</span>,
                <span class="ruby-value">ex_after:</span> <span class="ruby-node">%w[ &#39; ( - &lt; \[ { . ]</span>,
                <span class="ruby-value">ex_before:</span> <span class="ruby-node">%w[ . , ? ! &#39; ) \] } &gt; - _ ]</span>,
                <span class="ruby-value">script:</span> <span class="ruby-string">&#39;REN.sh&#39;</span>
              )
  <span class="ruby-ivar">@dry_run</span> = <span class="ruby-identifier">dry_run</span>
  <span class="ruby-ivar">@as_spaces</span> = <span class="ruby-identifier">as_spaces</span>
  <span class="ruby-ivar">@delimiters</span> = <span class="ruby-identifier">delimiters</span>
  <span class="ruby-ivar">@ex_after</span> = <span class="ruby-identifier">ex_after</span>
  <span class="ruby-ivar">@ex_before</span> = <span class="ruby-identifier">ex_before</span>
  <span class="ruby-ivar">@script</span> = <span class="ruby-identifier">script</span>
 
  <span class="ruby-comment"># Ensure any invalid values are not used:</span>
  <span class="ruby-ivar">@as_spaces</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@as_spaces</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Array</span>
  <span class="ruby-ivar">@delimiters</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@delimiters</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Array</span>
  <span class="ruby-ivar">@ex_after</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@ex_after</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Array</span>
  <span class="ruby-ivar">@ex_before</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@ex_before</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Array</span>
  <span class="ruby-ivar">@script</span> = <span class="ruby-string">&#39;REN.sh&#39;</span> <span class="ruby-keyword">if</span> [ <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-string">&#39;.&#39;</span>, <span class="ruby-string">&#39;..&#39;</span> ].<span class="ruby-identifier">include?</span> <span class="ruby-ivar">@script</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

      <div id="method-i-check_files" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">check_files</span><span
            class="method-args">( files )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Checks if the given file names exist, prints a list of those not existing and without write permissions, then returns an array of pathnames of the rest.</p>

          <div class="method-source-code" id="check_files-source">
            <pre><span class="ruby-comment"># File lib/rename_radically.rb, line 219</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">check_files</span>( <span class="ruby-identifier">files</span> )
  <span class="ruby-comment"># Containers:</span>
  <span class="ruby-identifier">not_found</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">no_permissions</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">ok</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>

  <span class="ruby-comment"># Check each file:</span>
  <span class="ruby-identifier">files</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span> }.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># Turn it into a pathname:</span>
    <span class="ruby-identifier">file</span> = <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">to_s</span>

    <span class="ruby-comment"># Ignore these:</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">basename</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">match</span>( <span class="ruby-regexp">/^\.{1,2}$/</span> )

    <span class="ruby-comment"># Check where it belongs:</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">file</span>.<span class="ruby-identifier">exist?</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">not_found</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">file</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">file</span>.<span class="ruby-identifier">writable?</span> <span class="ruby-keyword">or</span> <span class="ruby-operator">!</span><span class="ruby-identifier">file</span>.<span class="ruby-identifier">dirname</span>.<span class="ruby-identifier">writable?</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">no_permissions</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">file</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">ok</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">file</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Return only the valid files:</span>
  <span class="ruby-keyword">return</span> { <span class="ruby-value">ok:</span> <span class="ruby-identifier">ok</span>, <span class="ruby-value">not_found:</span> <span class="ruby-identifier">not_found</span>, <span class="ruby-value">no_permissions:</span> <span class="ruby-identifier">no_permissions</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-create_renaming_script" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">create_renaming_script</span><span
            class="method-args">( files )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Creates a bash script to rename files. Returns nil if the file cannot be created in the current folder. Otherwise returns a hash of not found or unchangeable files.</p>

          <div class="method-source-code" id="create_renaming_script-source">
            <pre><span class="ruby-comment"># File lib/rename_radically.rb, line 130</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">create_renaming_script</span>( <span class="ruby-identifier">files</span> )
  <span class="ruby-comment"># Check for permissions first:</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>( <span class="ruby-string">&#39;.&#39;</span> ).<span class="ruby-identifier">dirname</span>.<span class="ruby-identifier">writable?</span>

  <span class="ruby-comment"># Sanitize files first:</span>
  <span class="ruby-identifier">files</span> = <span class="ruby-identifier">check_files</span> <span class="ruby-identifier">files</span>

  <span class="ruby-comment"># Write the file:</span>
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span> <span class="ruby-ivar">@script</span>, <span class="ruby-string">&#39;w&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># Write the header and make it executable:</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;#! /usr/bin/env bash\n\n&quot;</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>

    <span class="ruby-comment"># Write in each file:</span>
    <span class="ruby-identifier">files</span>.<span class="ruby-identifier">delete</span>( <span class="ruby-value">:ok</span> ).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;mv &#39;#{file}&#39; \\\n   &#39;#{file}&#39;\n\n&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># As a last thing add in the self-destruction line:</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;# Self-destruction line, you may not want to edit this:\n&quot;</span> \
      <span class="ruby-node">&quot;rm &#39;#{@script}&#39;\n\n&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Return what files gave an error:</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">files</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-modality_compact" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">modality_compact</span><span
            class="method-args">( file )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Generates a compacted file name for the given pathname.</p>

          <div class="method-source-code" id="modality_compact-source">
            <pre><span class="ruby-comment"># File lib/rename_radically.rb, line 253</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">modality_compact</span>( <span class="ruby-identifier">file</span> )
  <span class="ruby-comment"># Take in the original file&#39;s name:</span>
  <span class="ruby-identifier">name</span> = <span class="ruby-identifier">file</span>.<span class="ruby-identifier">basename</span>( <span class="ruby-identifier">file</span>.<span class="ruby-identifier">extname</span> ).<span class="ruby-identifier">to_s</span>
    <span class="ruby-comment"># Turn these into spaces:</span>
    .<span class="ruby-identifier">gsub</span>( <span class="ruby-regexp">/(#{@as_spaces.map { |a| Regexp.escape a }.join &#39;|&#39;})/</span>, <span class="ruby-string">&#39; &#39;</span> )
    <span class="ruby-comment"># Add spaces after these:</span>
    .<span class="ruby-identifier">gsub</span>( <span class="ruby-regexp">/(#{@delimiters.map { |a| Regexp.escape a }.join &#39;|&#39;})/</span>, <span class="ruby-string">&#39;\1 &#39;</span> )
    <span class="ruby-comment"># Split it on spaces:</span>
    .<span class="ruby-identifier">split</span> <span class="ruby-string">&#39; &#39;</span>

  <span class="ruby-comment"># Do the capitalization:</span>
  <span class="ruby-identifier">name</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">word</span>, <span class="ruby-identifier">idx</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># Ignore roman numbers:</span>
    <span class="ruby-identifier">name</span>[ <span class="ruby-identifier">idx</span> ] = <span class="ruby-identifier">word</span>.<span class="ruby-identifier">capitalize</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">word</span>.<span class="ruby-identifier">match</span>( <span class="ruby-regexp">/^[IVXLCDM]+$/</span> )
    <span class="ruby-identifier">name</span>[ <span class="ruby-identifier">idx</span> ] = <span class="ruby-identifier">word</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">word</span>.<span class="ruby-identifier">match</span>( <span class="ruby-regexp">/^[ivxlcdm]+$/</span> )
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Return the joined name:</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">join</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-modality_regex" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">modality_regex</span><span
            class="method-args">( file, pattern, sub )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Generates a new file name for the given pathname using the given regex pattern and sub value.</p>

          <div class="method-source-code" id="modality_regex-source">
            <pre><span class="ruby-comment"># File lib/rename_radically.rb, line 316</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">modality_regex</span>( <span class="ruby-identifier">file</span>, <span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">sub</span> )
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">basename</span>( <span class="ruby-identifier">file</span>.<span class="ruby-identifier">extname</span> ).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">gsub</span>( <span class="ruby-regexp">/#{pattern}/</span>, <span class="ruby-identifier">sub</span>.<span class="ruby-identifier">to_s</span> )
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-modality_widen" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">modality_widen</span><span
            class="method-args">( file )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Generates a widened file name for the given pathname.</p>

          <div class="method-source-code" id="modality_widen-source">
            <pre><span class="ruby-comment"># File lib/rename_radically.rb, line 277</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">modality_widen</span>( <span class="ruby-identifier">file</span> )
  <span class="ruby-comment"># This starts off empty:</span>
  <span class="ruby-identifier">name</span> = <span class="ruby-string">&#39;&#39;</span>

  <span class="ruby-comment"># Let&#39;s parse each character:</span>
  <span class="ruby-identifier">file</span>.<span class="ruby-identifier">basename</span>( <span class="ruby-identifier">file</span>.<span class="ruby-identifier">extname</span> ).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">chars</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># To avoid extra spaces we have to follow these rules:</span>
    <span class="ruby-comment">#  1. c must not be a space</span>
    <span class="ruby-comment">#  2. name must not be empty</span>
    <span class="ruby-comment">#  3. name[ -1 ] must not be a space</span>
    <span class="ruby-comment">#  4. c must not be included in @ex_before</span>
    <span class="ruby-comment">#  5. name[-1] must not be included in @ex_after</span>
    <span class="ruby-comment">#  6. c and name[-1] must not both be numbers</span>
    <span class="ruby-comment">#  7. c must be equal to c.upcase</span>
    <span class="ruby-comment">#  8. c and name[ -1 ] must not be roman numbers</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">c</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&#39; &#39;</span> <span class="ruby-keyword">and</span>
       <span class="ruby-operator">!</span><span class="ruby-identifier">name</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">and</span>
       <span class="ruby-identifier">name</span>[ <span class="ruby-value">-1</span> ] <span class="ruby-operator">!=</span> <span class="ruby-string">&#39; &#39;</span> <span class="ruby-keyword">and</span>
       <span class="ruby-operator">!</span><span class="ruby-ivar">@ex_before</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">c</span> <span class="ruby-keyword">and</span>
       <span class="ruby-operator">!</span><span class="ruby-ivar">@ex_after</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">name</span>[ <span class="ruby-value">1</span> ] <span class="ruby-keyword">and</span>
       <span class="ruby-operator">!</span>( <span class="ruby-identifier">c</span>.<span class="ruby-identifier">match</span>( <span class="ruby-regexp">/[0-9]/</span> ) <span class="ruby-keyword">and</span> <span class="ruby-identifier">name</span>[ <span class="ruby-value">-1</span> ].<span class="ruby-identifier">match</span>( <span class="ruby-regexp">/[0-9]/</span> ) ) <span class="ruby-keyword">and</span>
       <span class="ruby-identifier">c</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-keyword">and</span>
       <span class="ruby-operator">!</span>( <span class="ruby-identifier">c</span>.<span class="ruby-identifier">match</span>( <span class="ruby-regexp">/[IVXLCDM]/</span> ) <span class="ruby-keyword">and</span> <span class="ruby-identifier">name</span>[ <span class="ruby-value">-1</span> ].<span class="ruby-identifier">match</span>( <span class="ruby-regexp">/[IVXLCDM]/</span> ) )
    <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">name</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&#39; &#39;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Always add in the character:</span>
    <span class="ruby-identifier">name</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">c</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Return the composed name:</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-rename" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">rename</span><span
            class="method-args">( files:, modality:, check_files: true, r_pattern: &#39;&#39;, r_sub: &#39;&#39; )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Recursively renames the given files using the given modality. Returns a hash of not found or unchangeable files.</p>

          <div class="method-source-code" id="rename-source">
            <pre><span class="ruby-comment"># File lib/rename_radically.rb, line 89</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rename</span>( <span class="ruby-value">files:</span>, <span class="ruby-value">modality:</span>, <span class="ruby-value">check_files:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">r_pattern:</span> <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-value">r_sub:</span> <span class="ruby-string">&#39;&#39;</span> )
  <span class="ruby-comment"># Data to return:</span>
  <span class="ruby-identifier">ret</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>

  <span class="ruby-comment"># If this is true then some extra steps have to be taken:</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">check_files</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">ret</span> = <span class="ruby-identifier">check_files</span> <span class="ruby-identifier">files</span>
    <span class="ruby-identifier">files</span> = <span class="ruby-identifier">ret</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value">:ok</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Then check each of them</span>
  <span class="ruby-identifier">files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># Special case for regex pattern:</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">modality</span> <span class="ruby-operator">==</span> <span class="ruby-value">:regex</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">file</span> = <span class="ruby-identifier">perform_rename</span> <span class="ruby-value">file:</span> <span class="ruby-identifier">file</span>,
        <span class="ruby-value">name:</span> <span class="ruby-identifier">modality_regex</span>( <span class="ruby-identifier">file</span>, <span class="ruby-identifier">r_pattern</span>, <span class="ruby-identifier">r_sub</span> )

    <span class="ruby-comment"># Rename the file using the right method:</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">file</span> = <span class="ruby-identifier">perform_rename</span> <span class="ruby-value">file:</span> <span class="ruby-identifier">file</span>,
        <span class="ruby-value">name:</span> <span class="ruby-identifier">send</span>( <span class="ruby-node">&quot;modality_#{modality}&quot;</span>, <span class="ruby-identifier">file</span> )
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># If we just renamed a folder, rename everything within it as well:</span>
    <span class="ruby-identifier">rename</span> <span class="ruby-value">files:</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">children</span>,
      <span class="ruby-value">modality:</span> <span class="ruby-identifier">modality</span>,
      <span class="ruby-value">check_files:</span> <span class="ruby-keyword">false</span>,
      <span class="ruby-value">r_pattern:</span> <span class="ruby-identifier">r_pattern</span>,
      <span class="ruby-value">r_sub:</span> <span class="ruby-identifier">r_sub</span> \
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">directory?</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Return what files gave an error:</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">ret</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-tester" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">tester</span><span
            class="method-args">( text:, modality:, r_pattern: &#39;&#39;, r_sub: &#39;&#39; )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Simple tester function for strings.</p>

          <div class="method-source-code" id="tester-source">
            <pre><span class="ruby-comment"># File lib/rename_radically.rb, line 77</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">tester</span>( <span class="ruby-value">text:</span>, <span class="ruby-value">modality:</span>, <span class="ruby-value">r_pattern:</span> <span class="ruby-string">&#39;&#39;</span>, <span class="ruby-value">r_sub:</span> <span class="ruby-string">&#39;&#39;</span> )
  <span class="ruby-comment"># Turn this into a pathname:</span>
  <span class="ruby-identifier">text</span> = <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">text</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">modality_regex</span> <span class="ruby-identifier">text</span>, <span class="ruby-identifier">r_pattern</span>, <span class="ruby-identifier">r_sub</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">modality</span> <span class="ruby-operator">==</span> <span class="ruby-value">:regex</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">send</span>( <span class="ruby-node">&quot;modality_#{modality}&quot;</span>, <span class="ruby-identifier">text</span> ) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">modality</span> <span class="ruby-operator">==</span> <span class="ruby-value">:regex</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.4.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

